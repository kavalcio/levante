{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Create Room - levanté!</title>
    <link rel="stylesheet" href="{% static 'roomCreate.css' %}">
</head>

<body>
    <h1 id="levante-text"> levanté! </h1>
    <input id="problem-description" type="text" size="100" rows="20"
        value="Type your brainstorming question here i.e. How might we?..." onclick=clearText()> <br>
    <button id="create-button" onclick="setupRoom()">Press Enter to Create Room</button>


    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script>
        var token = '{{csrf_token}}';
        //simply clears the text for the Key to be entered
        function clearText() {
            document.querySelector('#problem-description').value = ""
        }
        function setupRoom() {

            problem = document.querySelector('#problem-description').value
            $.ajax({
                type: 'POST',
                headers: { "X-CSRFToken": token },
                url: '/add_question/',
                data: {
                    problem: problem,
                    room_id: localStorage.getItem('roomId')
                },
                success: function (response) {
                    
                },
            });
            window.location.pathname = window.location.pathname.split("create")[0] + "code"
        }
        document.querySelector('#problem-description').onkeyup = function (e) {
            if (e.keyCode === 13) {  // enter, return
                setupRoom()
            }
        };
    </script>
</body>

</html>